
((digest . "e7f51442b839bd750e1fd160f6b433fe") (undo-list nil (1817 . 1819) nil ("t" . -1805) ((marker . 1837) . -1) ("s" . -1806) ((marker . 1837) . -1) ("u" . -1807) ((marker . 1837) . -1) ("c" . -1808) ((marker . 1837) . -1) ("h" . -1809) ((marker . 1837) . -1) ("i" . -1810) ((marker . 1837) . -1) ("_" . -1811) ((marker . 1837) . -1) ("k" . -1812) ((marker . 1837) . -1) ("u" . -1813) ((marker . 1837) . -1) ("n" . -1814) ((marker . 1837) . -1) 1815 nil ("t" . -1798) ((marker . 1837) . -1) ("r" . -1799) ((marker . 1837) . -1) ("a" . -1800) ((marker . 1837) . -1) ("d" . -1801) ((marker . 1837) . -1) ("e" . -1802) ((marker . 1837) . -1) ("r" . -1803) ((marker . 1837) . -1) ("." . -1804) ((marker . 1837) . -1) 1805 nil (" " . -1796) ((marker . 1837) . -1) 1797 nil (1794 . 1796) nil ("torihiki_" . -1794) ((marker . 1837) . -9) 1803 nil ("kun" . -1803) ((marker . 1837) . -3) 1806 nil (1794 . 1834) nil (1789 . 1794) nil (127 . 128) (")" . -127) (127 . 128) nil ("," . -127) ((marker . 1837) . -1) (" " . -128) ((marker . 1837) . -1) ("t" . -129) ((marker . 1837) . -1) ("s" . -130) ((marker . 1837) . -1) ("u" . -131) ((marker . 1837) . -1) ("c" . -132) ((marker . 1837) . -1) ("h" . -133) ((marker . 1837) . -1) ("i" . -134) ((marker . 1837) . -1) ("_" . -135) ((marker . 1837) . -1) ("k" . -136) ((marker . 1837) . -1) ("u" . -137) ((marker . 1837) . -1) ("n" . -138) ((marker . 1837) . -1) (")" . -139) ((marker . 1837) . -1) ((marker* . 1836) . 1) ((marker . 1837) . -1) ((marker . 1837) . -1) 140 (t 23289 23539 156705 712000) nil (774 . 776) nil ("." . -774) ((marker . 1837) . -1) 775 nil (771 . 775) nil (189 . 204) ("rate_db" . -189) ((marker . 1837) . -7) 196 nil (193 . 196) nil (184 . 189) nil (184 . 539) nil (175 . 184) nil ("
" . -90) ((marker . 1794) . -1) ((marker) . -1) ((marker . 1837) . -1) ((marker . 90) . -1) ((marker . 1807) . -1) 91 nil ("rate = pymysql.connect(user='kanemochi',
                             password='kanemochi_master',
                             host='kanemochidb.cap81xzffpo3.ap-northeast-1.rds.amazonaws.com',
                             database='ratedb',
                             charset='utf8',
                             cursorclass=pymysql.cursors.DictCursor)" . 91) ((marker) . -41) ((marker . 1837) . -355) ((marker) . -355) ((marker* . 1836) . 1) ((marker . 1837) . -355) ((marker* . 1816) . 333) ((marker . 1837) . -355) ((marker . 1807) . -287) 446 nil (91 . 460) nil ("rate = pymysql.connect(user='kanemochi',
                             password='kanemochi_master',
                             host='kanemochidb.cap81xzffpo3.ap-northeast-1.rds.amazonaws.com',
                             database='ratedb',
                             charset='utf8',
                             cursorclass=pymysql.cursors.DictCursor)
class Trader:" . 91) ((marker) . -41) ((marker . 91) . -356) ((marker . 91) . -356) ((marker) . -242) ((marker) . -242) ((marker) . -194) ((marker) . -194) ((marker) . -99) ((marker) . -99) ((marker) . -41) ((marker) . -41) ((marker) . -287) ((marker) . -287) ((marker) . -356) ((marker) . -356) ((marker . 1837) . -369) ((marker) . -369) ((marker . 1807) . -356) ((marker) . -369) 460 nil (91 . 95) nil ("d" . -91) ((marker . 1837) . -1) ("a" . -92) ((marker . 1837) . -1) 93 nil (91 . 93) nil ("connection" . 91) nil (537 . 546) (t 23289 23476 841564 96000) nil ("    " . -1722) 1714 nil ("    " . -1696) 1688 nil ("    " . -1606) 1598 nil ("    " . -1517) 1509 nil ("    " . -1476) ((marker . 1837) . -4) 1480 nil ("        " . -1429) 1417 nil ("        " . -1376) 1364 nil ("        " . -1233) 1221 nil ("        " . -1178) 1166 nil ("        " . -1076) 1064 nil ("        " . -1038) 1034 nil ("    " . -1011) ((marker . 1837) . -4) 1015 nil ("    " . -1015) 1003 nil ("    " . -965) 953 nil ("    " . -933) 921 nil ("    " . -792) 780 nil ("    " . -739) nil ("    " . -690) 682 nil ("    " . -598) 590 nil ("    " . -551) ((marker . 566) . -4) ((marker . 1837) . -4) 555 (t 23289 23451 881027 941000) nil (";" . -1902) ((marker . 1837) . -1) 1903 nil (1901 . 1903) (")" . -1901) (1901 . 1902) nil (")" . -1884) ((marker . 1837) . -1) ((marker* . 1836) . 1) ((marker . 1837) . -1) ((marker . 1837) . -1) 1885 nil (1883 . 1884) ("(" . -1883) (1883 . 1885) ("(" . -1883) (1878 . 1884) nil (1822 . 1826) 1814 nil (1792 . 1796) (1698 . 1702) (1605 . 1609) 1827 nil ("    " . -1564) ((marker . 1837) . -4) 1568 nil ("    " . -1568) ((marker . 1837) . -4) 1572 nil (1552 . 1572) ("        " . 1552) nil (1493 . 1513) ("            " . 1493) (1432 . 1452) ("            " . 1432) (1281 . 1301) ("            " . 1281) 1514 nil (1218 . 1238) ("            " . 1218) nil (1108 . 1128) ("            " . 1108) nil (1062 . 1082) ("            " . 1062) nil (1031 . 1047) ("        " . 1031) nil (977 . 993) ("            " . 977) nil (941 . 957) ("            " . 941) nil (796 . 812) ("            " . 796) nil (751 . 755) 743 nil (698 . 702) 690 nil (594 . 606) nil ("    " . -594) ((marker . 1794) . -4) ((marker . 1837) . -4) 598 nil ("    " . -598) ((marker . 1794) . -4) ((marker . 1837) . -4) 602 nil ("    " . -602) ((marker . 1837) . -4) 606 nil (602 . 606) 594 nil ("    " . -602) ((marker . 1837) . -4) 606 nil (602 . 606) 594 (t 23289 23416 772286 150000) nil (1795 . 1796) 537 nil (536 . 537) ("\"" . -536) (536 . 537) ("\"" . -536) (536 . 537) nil ("\"" . -526) ((marker . 1837) . -1) 527 nil (525 . 526) ("\"" . -525) (525 . 526) ("\"" . -525) (525 . 527) ("\"" . -525) (525 . 526) nil (":" . -535) ((marker . 1837) . -1) ((marker) . -1) 536 nil (535 . 536) nil ("'" . -535) ((marker . 1837) . -1) ((marker . 162) . -1) ((marker . 162) . -1) ((marker . 162) . -1) 536 nil ("'" . -525) ((marker . 1794) . -1) ((marker . 1837) . -1) ((marker . 151) . -1) ((marker . 151) . -1) ((marker . 151) . -1) ((marker . 151) . -1) 526 nil (526 . 536) nil (525 . 526) ("'" . -525) (525 . 526) ("'" . -525) ((marker . 151) . -1) (525 . 527) ("'" . -525) ((marker . 151) . -1) ((marker . 151) . -1) (525 . 526) nil (522 . 525) nil (512 . 522) nil (504 . 512) nil ("
" . -504) ((marker . 1837) . -1) ((marker . 1807) . -1) 505 nil (505 . 514) ("        " . 505) ((marker . 1837) . -8) 513 nil (504 . 513) ("        " . 504) ((marker . 1837) . -8) 512 nil (503 . 512) nil ("        
" . 504) nil ("        
" . 504) ((marker . 562) . -8) ((marker . 562) . -8) ((marker . 1838) . -9) nil ("
" . 504) ((marker . 1838) . -1) nil ("
" . 504) ((marker . 1838) . -1) nil ("        kun" . 504) ((marker . 1794) . -8) nil (512 . 516) nil (504 . 512) nil (504 . 513) nil ("        self.__load_config__()
        self.__make_stat_file__()
        self.tsuchi_kun = tsuchi_kun
" . 504) ((marker . 1794) . -102) ((marker) . -65) ((marker) . -65) ((marker) . -31) ((marker) . -31) ((marker . 1023) . -39) ((marker) . -102) ((marker) . -102) ((marker . 562) . -8) ((marker . 562) . -8) ((marker) . -102) ((marker . 1838) . -31) nil (606 . 615) ("        " . 606) ((marker . 1837) . -8) 614 nil (605 . 614) nil (614 . 1802) nil (605 . 614) nil ("
" . -605) ((marker . 1837) . -1) ((marker . 1807) . -1) ("
" . -606) ((marker . 1837) . -1) ((marker . 1807) . -1) 607 nil ("def new_get_history(self,start,count):
        st = datetime.strptime(start, '%Y-%m-%dT%H:%M:%S').astimezone(timezone(self.tzone))
        st_utc = st.astimezone(timezone('UTC'))

        with rate_db_connect.cursor() as cursor:
            sql_query = \"select * from {0} where datetime < \\\"{1}\\\" order by datetime desc limit {2}\".format(self.rate_table,datetime,count)
            cursor.execute(sql)
            data = cursor.fetchall()
            
        for d in data:
            values = list(d.values())
            t_utc = datetime.strptime(values[0], '%Y-%m-%d %H:%M:%S').replace(tzinfo=timezone('UTC'))
            t = t_utc.astimezone(timezone(self.tzone))
            result = [t.strftime('%Y'), t.strftime('%m'), t.strftime('%d'), t.strftime('%H'), t.strftime('%M'), t.strftime('%S'), t.weekday()]
            result.extend(values[1:]) # レスポンス内の時刻は除外
            resultList.append(result)
            
        resultList = resultList[-count:]
        print(\"oldest: {0[0]}-{0[1]}-{0[2]} {0[3]}:{0[4]}:{0[5]}\".format(resultList[0]))
        print(\"latest: {0[0]}-{0[1]}-{0[2]} {0[3]}:{0[4]}:{0[5]}\".format(resultList[-1]))
        print(resultList)
        return resultList" . 608) ((marker* . 1760) . 766) ((marker* . 1760) . 766) ((marker . 1023) . -422) ((marker . 1837) . -1188) ((marker) . -1188) ((marker . 1807) . -1163) 1796 nil (453 . 606) nil (452 . 453) nil (1691 . 1692) ("(" . -1691) (1691 . 1693) ("(" . -1691) (1691 . 1692) nil (1676 . 1691) ("new" . -1676) ((marker . 1837) . -3) ((marker . 1838) . -3) 1679 nil (1676 . 1679) nil (1671 . 1676) nil (1644 . 1671) nil ("        datetime = st_utc.strftime('%Y-%m-%d %H:%M:%S')" . 633) (t 23289 23304 106057 606000) nil (49 . 89) nil (48 . 49) nil ("
" . -1657) ((marker . 1794) . -1) ((marker) . -1) ((marker) . -1) ((marker) . -1) ((marker) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1837) . -1) ((marker) . -1) ((marker) . -1) ((marker . 1807) . -1) 1658 nil ("with connection.cursor() as cursor:
        sql = \"select * from USD_JPY order by datetime desc limit 120;\"
        cursor.execute(sql)
        results = cursor.fetchall()
        print(results)
        # " . 1658) ((marker . 1794) . -205) ((marker) . -51) ((marker) . -195) ((marker) . -144) ((marker) . -51) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker . 1761) . -195) ((marker) . -195) ((marker . 1761) . -186) ((marker . 1761) . -186) ((marker) . -186) ((marker) . -205) ((marker . 1838) . -36) nil (1853 . 1863) ("    " . 1853) ((marker) . -4) ((marker . 1761) . -4) ((marker . 1761) . -4) ((marker) . -4) ((marker . 1837) . -4) 1857 nil ("    " . -1857) ((marker . 1837) . -4) ((marker) . -4) 1861 nil (413 . 1656) nil (411 . 413) (t 23289 15456 1473 719000) nil (606 . 607) (")" . -606) (606 . 607) nil (599 . 606) nil ("t" . -599) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) 600 nil ("y" . -600) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("p" . -601) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("e" . -602) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("(" . -603) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) (")" . 604) ("r" . -604) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("e" . -605) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("s" . -606) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("u" . -607) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("l" . -608) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("t" . -609) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ("s" . -610) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) (")" . -611) ((marker . 1794) . -1) ((marker . 1761) . -1) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker* . 1836) . 1) ((marker . 1837) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) 612 nil (612 . 613) (")" . -612) (612 . 613) nil (")" . -604) ((marker . 1837) . -1) ((marker* . 1836) . 1) ((marker . 1837) . -1) ((marker . 1837) . -1) 605 nil (603 . 604) ("(" . -603) (603 . 605) ("(" . -603) (599 . 604) nil ("r" . -478) ((marker . 1837) . -1) ("a" . -479) ((marker . 1837) . -1) ("t" . -480) ((marker . 1837) . -1) ("e" . -481) ((marker . 1837) . -1) ("d" . -482) ((marker . 1837) . -1) ("b" . -483) ((marker . 1837) . -1) ("." . -484) ((marker . 1837) . -1) 485 (t 23289 15317 203553 258000) nil (605 . 613) ("(" . -605) (605 . 607) ("(" . -605) (600 . 606) nil (591 . 600) (t 23289 15286 362617 424000) nil ("
" . -448) ((marker . 1023) . -1) ((marker . 1837) . -1) ((marker . 1807) . -1) 449 nil ("        # 値の追加" . 449) nil ("r" . -551) ((marker . 1837) . -1) (" " . -552) ((marker . 1837) . -1) ("=" . -553) ((marker . 1837) . -1) (" " . -554) ((marker . 1837) . -1) 555 nil ("
" . 575) ((marker) . -1) ((marker) . -1) ((marker . 1838) . -1) ((marker) . -1) nil ("        print(r) # -> 1" . 575) ((marker) . -23) nil ("
" . 635) ((marker) . -1) ((marker) . -1) ((marker . 1838) . -1) ((marker) . -1) nil ("        # " . 635) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker . 1761) . -8) ((marker) . -10) nil ("
" . -654) ((marker . 1794) . -1) ((marker) . -1) ((marker) . -1) ((marker) . -1) ((marker . 1837) . -1) ((marker . 1761) . -1) ((marker . 1761) . -1) ((marker . 1807) . -1) ("        # 値の取り出し
        # sql = \"SELECT * FROM USD_JPY\"
        # cursor.execute(sql)
        # results = cursor.fetchall()
        # for r in results:
        #         print(r)" . -655) ((marker) . -87) ((marker) . -87) ((marker) . -57) ((marker) . -57) ((marker) . -17) ((marker) . -17) ((marker) . -125) ((marker) . -125) ((marker) . -97) ((marker . 1837) . -179) ((marker) . -153) ((marker) . -153) ((marker) . -179) ((marker* . 1836) . 1) ((marker . 1837) . -179) ((marker* . 1816) . 3) ((marker . 1837) . -179) ((marker . 1807) . -153) ((marker . 1761) . -178) ((marker . 1761) . -179) 834 nil (643 . 645) nil (634 . 643) nil ("
" . -634) ((marker) . -1) ((marker) . -1) ((marker . 1837) . -1) ((marker . 1807) . -1) 635 nil ("        print(type(results))" . 635) ((marker) . -28) (t 23289 14736 290216 198000) nil (662 . 663) (")" . -662) (662 . 663) nil (")" . -654) ((marker . 1837) . -1) ((marker* . 1836) . 1) ((marker . 1837) . -1) ((marker . 1837) . -1) 655 nil (653 . 654) ("(" . -653) (653 . 655) ("(" . -653) (649 . 654) (t 23289 14718 792205 312000) nil (nil fontified t 479 . 541) (nil face font-lock-string-face 479 . 541) (479 . 541) nil (586 . 594) ("(" . -586) (586 . 588) ("(" . -586) (581 . 587) nil (573 . 581) nil ("        connection.commit()" . 573) nil (nil rear-nonsticky nil 571 . 572) (545 . 572) nil (536 . 545) nil ("insert into stats (datetime,bid,ask,buy_score,stay_score,sell_score,buy_point,stay_point,sell_point,buy_units,sell_units,posion_buy_units,position_sell_units,stoploss_units,takeprofit_units,balance,fukumi,compensation) values (\\\"2018/05/14 02:17:11\\\",109.331,109.335,0,0,1,0.000123414,0.0414559,0.958421,0,0,0,0,0,0,2886610,0,1);" . -479) ((marker . 1837) . -329) ((marker) . -329) 808 nil (289 . 293) nil ("stat_" . -289) ((marker . 1837) . -5) 294 nil (nil rear-nonsticky nil 1083 . 1084) (1 . 1084) nil ("#!/usr/bin/env python
# -*- coding: utf-8 -*-

# filename : querytest.py
# date : 2018-05-14
# author : Yoshiki Kurihara <y-kurihara@ist.osaka-u.ac.jp

#import files

#DEFINE CONSTANT

#DEFINE METHOD
if __name__ == '__main__' :
    
" . 1) ((marker . 1794) . -233) ((marker . 1023) . -233) ((marker) . -233) ((marker) . -233) ((marker) . -233) ((marker . 1838) . -22) (t . -1) nil ("%time%" . -83) (89 . 99) 1 nil ("%file%" . -61) (67 . 79) 1 nil (1 . 224) (t . -1)))
