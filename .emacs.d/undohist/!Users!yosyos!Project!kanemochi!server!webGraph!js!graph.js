
((digest . "11f5160606a988e22b2744d392aeb3c1") (undo-list nil ("
" . 394) ((marker) . -1) ((marker) . -1) ((marker) . -1) nil ("	
" . 394) ((marker) . -2) ((marker) . -2) ((marker . 396) . -2) ((marker) . -2) (t 23295 9456 583069 235000) nil (1137 . 1139) (")" . -1137) (1137 . 1138) (t 23295 9378 757086 853000) nil (945 . 959) ("bid" . -945) 948 nil (945 . 948) nil ("[12, 19, 3, 17, 6, 3, 7]" . -945) 969 nil ("	 " . -722) 723 nil (nil rear-nonsticky nil 1146 . 1147) (722 . 1147) nil (720 . 722) nil ("	" . -721) (722 . 723) ("}" . -722) (722 . 723) nil ("{" . -722) ("}" . 723) nil ("}" . 724) (722 . 724) ("{" . -722) (722 . 724) ("{" . -722) (722 . 723) nil ("]" . -722) 723 nil (722 . 723) ("]" . -722) (722 . 723) nil (720 . 722) nil (nil rear-nonsticky nil 719 . 720) (669 . 720) nil (667 . 669) nil ("
" . 645) (t 23295 9332 713707 413000) nil ("
" . -641) 642 nil ("		var bid = 
		var ask = " . -642) 667 nil (559 . 560) nil ("x" . -559) 560 nil (565 . 580) nil ("n" . -565) ("o" . -566) ("w" . -567) ("_" . -568) ("t" . -569) ("i" . -570) ("m" . -571) ("e" . -572) (";" . -573) 574 nil ("rows[i]['bid'];" . 574) nil ("rows[i]['bid'];" . 589) nil ("rows[i]['bid'];" . 604) nil ("rows[i]['bid'];" . 619) nil ("rows[i]['bid'];" . 634) nil ("rows[i]['bid'];" . 649) nil ("rows[i]['bid'];" . 664) nil (664 . 679) nil (649 . 664) nil (634 . 649) nil (619 . 634) nil (604 . 619) nil (589 . 604) nil (574 . 589) nil ("rows[i]['bid'];" . 648) nil (620 . 635) nil ("n" . -620) ("o" . -621) ("w" . -622) ("_" . -623) ("t" . -624) ("i" . -625) ("m" . -626) ("e" . -627) (";" . -628) 629 nil ("rows[i]['ask'];" . 670) 685 nil ("		" . -578) 576 nil (578 . 604) nil (576 . 578) ("		" . 575) (575 . 577) (575 . 576) ("		" . 575) 577 nil (574 . 577) nil ("
" . -547) 548 nil ("		tmp_ask['x'] = now_time;" . 548) nil (577 . 628) nil (574 . 577) nil (554 . 557) nil ("bid" . -554) 557 nil (550 . 574) nil (547 . 550) nil (546 . 547) nil (538 . 546) ("now" . -538) 541 nil (539 . 541) nil ("w" . -539) 540 nil (538 . 540) nil (535 . 538) nil ("x" . -533) 534 nil (531 . 534) ("'" . -531) (531 . 532) ("'" . -531) (531 . 533) ("'" . -531) (531 . 532) nil ("t" . -531) 532 nil (530 . 532) ("[" . -530) (530 . 532) ("[" . -530) (530 . 531) nil (523 . 530) ("tmp_" . -523) 527 nil (523 . 527) ("tmp" . -523) 526 nil (523 . 526) nil (520 . 523) nil ("		
" . 473) nil (472 . 475) (t 23295 9279 20358 269000) nil (469 . 470) ("{" . -469) (469 . 471) ("{" . -469) (466 . 470) nil (458 . 459) nil (455 . 456) ("{" . -455) (455 . 457) ("{" . -455) (452 . 456) nil (456 . 461) nil ("." . -456) 457 nil (448 . 457) nil (441 . 448) nil (438 . 441) nil ("
" . -542) 543 nil ("		bid_graph_list[]" . 543) nil (559 . 560) ("[" . -559) (559 . 561) ("[" . -559) (559 . 560) nil (545 . 559) ("bid" . -545) 548 nil (545 . 548) nil (542 . 545) (t 23295 9243 36173 369000) nil (286 . 289) nil ("bid" . -286) 289 nil (282 . 306) nil (281 . 282) nil (280 . 281) nil (257 . 280) nil ("var bid_graph_list = []" . 349) 372 nil (349 . 353) nil (366 . 367) ("[" . -366) (366 . 368) ("[" . -366) (352 . 367) nil (" " . -352) 353 nil (351 . 353) nil ("g" . -351) (" " . -352) ("d" . -353) 354 nil (349 . 354) nil ("b" . -349) ("b" . -350) 351 nil (350 . 351) nil ("g" . -350) 351 nil (349 . 351) nil (348 . 349) ("	" . 347) (347 . 348) (347 . 348) (t 23295 9199 42887 951000) nil (471 . 473) nil ("k" . -471) 472 nil (470 . 472) nil ("bid" . -470) 473 nil (487 . 488) nil (485 . 487) nil ("bid" . -485) 488 nil (490 . 491) nil (466 . 490) nil (463 . 466) nil (462 . 463) nil (457 . 460) nil ("datetime" . -457) 465 nil (445 . 448) nil ("=" . -445) 446 nil (" " . -446) 447 nil (445 . 447) nil (" " . -445) ("-" . -446) (" " . -447) 448 nil (438 . 448) nil (438 . 457) nil ("v" . -438) 439 nil (438 . 439) nil (435 . 438) (t 23295 9167 737098 855000) nil ("
" . -435) 436 nil ("		var now_time = new Date(rows[i]['datetime']);" . 436) nil (438 . 483) nil (435 . 438) (t 23295 9162 915719 543000) nil ("
" . -435) 436 nil ("		get" . 436) nil (438 . 441) nil ("
" . -256) 257 nil ("const TIME_LIMIT = 30;
const BORDER_PIP = 4;
const PIPS = 0.01" . -257) 319 nil ("
" . -409) 410 nil ("	var sell_units_record=[], buy_units_record=[];
	var sell_count = 0,buy_count = 0;
	var suc_sell_count = 0,suc_buy_count = 0;" . -410) 535 nil ("
" . -536) 537 nil ("	var" . 537) nil (538 . 541) nil (537 . 538) ("	" . 536) (536 . 537) (536 . 537) ("	" . 536) 537 nil (625 . 628) nil ("	" . -627) (628 . 629) ("}" . -628) (628 . 629) nil (625 . 628) nil ("
		var tmp_obj = {};
		// buyされた時刻とその時のレートを記録
		if(rows[i]['buy_units'] > 0){
			var tmp_time = new Date(rows[i]['datetime']);
			tmp_time.setMinutes(now_time.getMinutes() + TIME_LIMIT);
			tmp_obj['end'] = tmp_time;
			tmp_obj['ask'] = rows[i]['ask'] + BORDER_PIP * PIPS;
			buy_units_record.push(tmp_obj);
			buy_count++;
		}

		// sellされた時刻とその時のレートを記録
		if(rows[i]['sell_units'] > 0){
			var tmp_time = new Date(rows[i]['datetime']);
			tmp_time.setMinutes(now_time.getMinutes() + TIME_LIMIT);
			tmp_obj['end'] = tmp_time;
			tmp_obj['bid'] = rows[i]['bid'] - BORDER_PIP * PIPS;
			sell_units_record.push(tmp_obj)
			sell_count++;
		}

		// buyの正解率を計算
		for(var j = 0; j < buy_units_record.length; j++) {
			if(buy_units_record[j]['ask'] < rows[i]['ask']) {
				suc_buy_count++;
				buy_units_record.splice(0,j+1);
				continue;
			}
			if (buy_units_record[j]['end'] < now_time){
				buy_units_record.splice(0,j+1);
			}
		}

		// sellの正解率を計算
		for(var j = 0; j < sell_units_record.length; j++) {
			if(sell_units_record[j]['bid'] > rows[i]['bid']) {
				suc_sell_count++;
				sell_units_record.splice(0,j+1);
				continue;
			}
			if (sell_units_record[j]['end'] < now_time){
				sell_units_record.splice(0,j+1);
			}
		}
	}
	console.log('buy success rate: ' + String(suc_buy_count/buy_count));
	console.log('sell success rate: ' + String(suc_sell_count/sell_count));	" . -626) 2000 nil (1 . 2024) (t . -1)))
